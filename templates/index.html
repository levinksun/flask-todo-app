{% extends 'base.html' %}

{% block content %}
<div class="todo-app">
    <header>
        <h1>My Tasks</h1>
        <p class="subtitle">{{ tasks|length }} tasks remaining</p>
    </header>

    <form action="/" method="POST" class="add-task-form">
        <div class="input-group">
            <input type="text" name="content" id="content" placeholder="Add a new task..." autocomplete="off" required>
        </div>
        <div class="meta-inputs">
            <select name="priority" class="priority-select">
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
            </select>
            <input type="date" name="due_date" class="date-input">
        </div>
        <button type="submit" class="add-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>
    </form>

    <div class="task-list">
        {% if tasks|length < 1 %} <div class="empty-state">
            <p>All caught up! ðŸŽ‰</p>
    </div>
    {% else %}
    {% for task in tasks %}
    <div class="task-item {% if task.completed %}completed{% endif %}">
        <a href="/update/{{ task.id }}" class="check-btn">
            <div class="checkbox">
                {% if task.completed %}
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                {% endif %}
            </div>
        </a>
        <div class="task-info">
            <span class="task-content">{{ task.title }}</span>
            <div class="task-meta">
                <span class="badge priority-{{ task.priority|lower }}">{{ task.priority }}</span>
                {% if task.due_date %}
                <span class="due-date">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    {{ task.due_date.strftime('%b %d') }}
                </span>
                {% endif %}
            </div>
        </div>
        <div class="actions">
            <a href="/edit/{{ task.id }}" class="edit-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
            </a>
            <a href="/delete/{{ task.id }}" class="delete-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </a>
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>
</div>
{% endblock %}